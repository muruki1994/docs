"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[9918],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>m});var i=a(7294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,i,n=function(t,e){if(null==t)return{};var a,i,n={},r=Object.keys(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var s=i.createContext({}),c=function(t){var e=i.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},d=function(t){var e=c(t.components);return i.createElement(s.Provider,{value:e},t.children)},p="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},h=i.forwardRef((function(t,e){var a=t.components,n=t.mdxType,r=t.originalType,s=t.parentName,d=l(t,["components","mdxType","originalType","parentName"]),p=c(a),h=n,m=p["".concat(s,".").concat(h)]||p[h]||u[h]||r;return a?i.createElement(m,o(o({ref:e},d),{},{components:a})):i.createElement(m,o({ref:e},d))}));function m(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=a.length,o=new Array(r);o[0]=h;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[p]="string"==typeof t?t:n,o[1]=l;for(var c=2;c<r;c++)o[c]=a[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}h.displayName="MDXCreateElement"},8891:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=a(7462),n=(a(7294),a(3905));a(4996);const r={id:"overview",title:"Build a Rollup With Avail",sidebar_label:"Overview",description:"Discover how to utilize Avail as a data availability layer.",keywords:["documentation","avail","develop","build","data availability","da"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},o=void 0,l={unversionedId:"build/overview",id:"build/overview",title:"Build a Rollup With Avail",description:"Discover how to utilize Avail as a data availability layer.",source:"@site/docs/build/overview.md",sourceDirName:"build",slug:"/build/overview",permalink:"/build/overview",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/build/overview.md",tags:[],version:"current",lastUpdatedBy:"Danny Salman",lastUpdatedAt:1700606628,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"overview",title:"Build a Rollup With Avail",sidebar_label:"Overview",description:"Discover how to utilize Avail as a data availability layer.",keywords:["documentation","avail","develop","build","data availability","da"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},sidebar:"avail",previous:{title:"Build with Avail",permalink:"/category/build-with-avail"},next:{title:"Optimium",permalink:"/category/optimium"}},s={},c=[{value:"Overview",id:"overview",level:2},{value:"System Operations",id:"system-operations",level:2},{value:"Attestation Bridge",id:"attestation-bridge",level:3},{value:"Interaction with the L1",id:"interaction-with-the-l1",level:3},{value:"Security and Finalization",id:"security-and-finalization",level:3},{value:"Avail Light Clients and Data Verification",id:"avail-light-clients-and-data-verification",level:3},{value:"Validium Architecture with Avail",id:"validium-architecture-with-avail",level:2},{value:"Optimium Architecture with Avail",id:"optimium-architecture-with-avail",level:2},{value:"Application IDs (app_id)",id:"application-ids-app_id",level:2},{value:"DA Solution Suites",id:"da-solution-suites",level:2}],d={toc:c},p="wrapper";function u(t){let{components:e,...a}=t;return(0,n.kt)(p,(0,i.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"Integrating with Avail enhances transaction processing by keeping data off-chain while ensuring its availability and validity. Avail's role as an optimized blockchain for data availability is central to this adaptation, offering a robust and modular design for diverse use cases."),(0,n.kt)("h2",{id:"system-operations"},"System Operations"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Transaction Processing and Sequencing"),": In the rollup framework, transactions are processed, sequenced, and readied for submission to Avail."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Data Submission to Avail"),": This processed data is securely transferred to Avail, following a specific protocol designed for efficient and secure data handling."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Configuration and Connection"),": Rollup systems are configured for seamless integration with Avail, ensuring smooth data flow and interaction."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Smart Contract Interaction"),": Users engage with on-chain contracts, providing Merkle proofs for actions like withdrawals. These contracts interact with Avail to authenticate and process these transactions.")),(0,n.kt)("h3",{id:"attestation-bridge"},"Attestation Bridge"),(0,n.kt)("admonition",{title:"Available on testnet",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Avail's Attestation Bridge is available on testnet for Ethereum.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Streamlined Verification with Attestation Bridge"),": Avail's Attestation Bridge simplifies the verification process on L1. This bridge facilitates the direct posting of data availability attestations to the L1 blockchain, thereby easing the workload of the verification contract."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Role of the Verification Contract"),": With the Attestation Bridge in place, the verification contract's primary role is to check these on-chain attestations, ensuring data availability and integrity.")),(0,n.kt)("h3",{id:"interaction-with-the-l1"},"Interaction with the L1"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Verification Contract Functionality"),": Situated on the L1, this contract plays a dual role\u2014it verifies transaction accuracy and checks data availability, utilizing Avail's attestations."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"L1 Contract Dynamics"),": Rollups maintain a communicative relationship with L1 via dedicated contracts. The main attestation contract stores state commitments (Merkle data roots) from block producers. Parallelly, a verification contract handles state transition validity checks.")),(0,n.kt)("h3",{id:"security-and-finalization"},"Security and Finalization"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Validator Consensus"),": Avail's validators, part of a Nominated Proof-of-Stake system, reach consensus on the transaction batches."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"GRANDPA Finality Gadget"),": The consensus is solidified using the GRANDPA finality gadget, guaranteeing the availability of data."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Data Root Publication"),": Sequencers publish the data root on the L1, linking Avail's data availability with L1's security.")),(0,n.kt)("h3",{id:"avail-light-clients-and-data-verification"},"Avail Light Clients and Data Verification"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Independent Data Verification"),": Avail's light clients enable verification of data availability without relying on the majority of nodes."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Data Sampling"),": Light clients can sample from the blocks on Avail's blockchain using an AppId to validate data availability.")),(0,n.kt)("h2",{id:"validium-architecture-with-avail"},"Validium Architecture with Avail"),(0,n.kt)("p",null,"In the Validium model, transactions are collected by a sequencer, which batches them together. The sequencer's role extends beyond transaction ordering\u2014it prepares a Merkle tree of transactions, where each leaf represents a transaction or a set of transactions. The root of this Merkle tree, known as the batch hash, is crucial for ensuring the integrity of the transaction batch and for constructing inclusion proofs."),(0,n.kt)("p",null,"Avail comes into play as the recipient of this transaction data. Upon receiving the batched transactions, Avail executes erasure coding."),(0,n.kt)("p",null,"An inclusion proof is a Merkle proof generated by Avail to attest that a specific transaction is part of the batch and has been recorded on Avail\u2019s blockchain. It\u2019s essential for verifying the presence of transactions without downloading the entire dataset."),(0,n.kt)("p",null,"Simultaneously, the state of the system is computed by executing these transactions. A Prover, which is a computational entity, takes the state transitions and generates cryptographic proofs\u2014such as zk-SNARKs or STARKs\u2014to attest to the validity of state changes without revealing the underlying data."),(0,n.kt)("p",null,"A Sequence Sender is responsible for communicating with L1. It takes the inclusion proofs and batch hashes from Avail, along with validity proofs from the Prover, and submits them to the L1 chain. This submission process usually involves smart contract calls that log the transaction data's hash and the validity proofs onto the L1 blockchain."),(0,n.kt)("p",null,"The L1 acts as the main layer for dispute resolution and finality. While it doesn\u2019t store the transaction data itself, it retains the cryptographic commitments to the data. This ensures that if there's ever a dispute or need for verification, the proofs can be checked against the commitments to ascertain the validity of state transitions and the availability of data."),(0,n.kt)("p",null,"This setup leverages L1's security while offloading the data-intensive work to Avail, which is optimized for handling vast amounts of data efficiently and securely. By doing so, Validium chains can significantly reduce their costs and improve scalability, all the while maintaining a high level of trust and security."),(0,n.kt)("h2",{id:"optimium-architecture-with-avail"},"Optimium Architecture with Avail"),(0,n.kt)("p",null,"In the Optimium model, transactions are similarly aggregated by a sequencer. This sequencer organizes transactions into batches and computes a data root, a Merkle tree root representing the batch, crucial for integrity and proof of inclusion."),(0,n.kt)("p",null,"Avail is integrated as a data availability layer. Once the sequencer sends transaction batches to Avail, it employs erasure coding to ensure data redundancy and integrity. Avail then generates KZG polynomial commitments and the data root, essential for confirming data availability."),(0,n.kt)("p",null,"The next phase involves state computation of the system, executed on the rollup, depending on the chain\u2019s architecture. Avail\u2019s data availability solution ensures that the transaction data is readily accessible for any necessary computation or verification."),(0,n.kt)("p",null,"A Sequence Sender, in this architecture, is responsible for submitting proofs to the main chain. These include the data root from Avail, ensuring that the data availability is anchored to the security of Ethereum or the corresponding L2."),(0,n.kt)("p",null,"This architecture provides the dual benefits of the main chain's security for settlement and dispute resolution, and Avail's efficiency in handling data. By offloading data availability to Avail, Optimium chains can achieve higher scalability and efficiency while maintaining robust security and decentralization."),(0,n.kt)("h2",{id:"application-ids-app_id"},"Application IDs (app_id)"),(0,n.kt)("p",null,"As a general purpose base layer, Avail is designed to support many\nmodular chains at the same time, providing consensus and data\navailability to all of them simultaneously."),(0,n.kt)("p",null,'How does this work? Avail headers contain an index that allows a given\nmodular chain (or "application" in Avail terminology) to determine and\ndownload ',(0,n.kt)("em",{parentName:"p"},"only")," the sections of a block that have data for that\nparticular application."),(0,n.kt)("p",null,"This has very important benefits, including:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Modular applications are largely unaffected by other uses of the\nbase layer at the same time."),(0,n.kt)("li",{parentName:"ul"},"Block sizes can increase without requiring applications to fetch\nmore data, because they don't fetch the whole block, only what's\nrelevant to them.")),(0,n.kt)("p",null,"Data availability sampling is still done on the entire block,\nhowever--this is the process where clients sample very small parts of\nthe block at random to verify availability."),(0,n.kt)("p",null,"If you'd like to learn how your idea could\nbenefit from Avail, please ",(0,n.kt)("a",{parentName:"p",href:"https://discord.gg/S2XQJjHsZt"},"join our\nDiscord"),". We'd love to chat."),(0,n.kt)("h2",{id:"da-solution-suites"},"DA Solution Suites"),(0,n.kt)("p",null,"Avail Uncharted is a core initiative within the Avail ecosystem dedicated to exploring uncharted territories in modular blockchain technology.\nDriven by the core Avail team, the mission is twofold: to nurture innovative projects and to cultivate a close-knit collaboration with the community."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Project"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Repository"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Avail-Powered Optimistic EVM Rollup"),(0,n.kt)("td",{parentName:"tr",align:"left"},"A sovereign EVM-compatible optimistic rollup construction."),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/availproject/op-evm"},(0,n.kt)("ins",null,"op-evm")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"DA Adapter for Sovereign SDK"),(0,n.kt)("td",{parentName:"tr",align:"left"},"An adapter enabling modular sovereign rollups using the Sovereign Rollup SDK."),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/availproject/sovereign-sdk/tree/main"},(0,n.kt)("ins",null,"sovereign-da-adapter")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"DA Interface for Madara Starknet"),(0,n.kt)("td",{parentName:"tr",align:"left"},"A unified DA interface allowing the Madara Starknet Sequencer to publish data onto Avail."),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/keep-starknet-strange/madara/pull/1021"},(0,n.kt)("ins",null,"madara-da-interface")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Avail-Powered zkEVM-Based Validium"),(0,n.kt)("td",{parentName:"tr",align:"left"},"A Validium based on the Polygon zkEVM stack that uses Avail instead of the native DAC for data availability."),(0,n.kt)("td",{parentName:"tr",align:"left"},"- ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/QEDK/validium-node"},(0,n.kt)("ins",null,"validium-node"))," ",(0,n.kt)("br",null)," - ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/QEDK/validium-contracts"},(0,n.kt)("ins",null,"validium-contracts")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"DA Adapter for Optimism SDK"),(0,n.kt)("td",{parentName:"tr",align:"left"},"An adapter facilitating Avail DA's integration with Optimism's Rollup SDK op-stack."),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/availproject/avail-op-stack-adapter"},(0,n.kt)("ins",null,"avail-op-stack-adapter")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"DA Adapter for Rollkit"),(0,n.kt)("td",{parentName:"tr",align:"left"},"An adapter designed for Rollkit's modular rollup framework that enables ABCI-compatible solutions."),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"https://github.com/rollkit/rollkit/pull/1168"},(0,n.kt)("ins",null,"rollkit-da-adapter")))))))}u.isMDXComponent=!0}}]);